function dean_addEvent(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else{n.$$guid||(n.$$guid=dean_addEvent.guid++),t.events||(t.events={});var i=t.events[e];i||(i=t.events[e]={},t["on"+e]&&(i[0]=t["on"+e])),i[n.$$guid]=n,t["on"+e]=handleEvent}}function removeEvent(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.events&&t.events[e]&&delete t.events[e][n.$$guid]}function handleEvent(t){var e=!0;t=t||fixEvent(((this.ownerDocument||this.document||this).parentWindow||window).event);var n=this.events[t.type];for(var i in n)this.$$handleEvent=n[i],this.$$handleEvent(t)===!1&&(e=!1);return e}function fixEvent(t){return t.preventDefault=fixEvent.preventDefault,t.stopPropagation=fixEvent.stopPropagation,t}function govspeakBarcharts(){$(".js-barchart-table").each(function(){$.magnaCharta($(this),{toggleText:"Change between chart and table"})})}!function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,i){var s=t.Event(n);return e.trigger(s,i),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},handleRemote:function(i){var s,a,o,r,l,u;if(n.fire(i,"ajax:before")){if(r=i.data("with-credentials")||null,l=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){s=i.attr("method"),a=i.attr("action"),o=i.serializeArray();var c=i.data("ujs:submit-button");c&&(o.push(c),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(s=i.data("method"),a=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(s=i.data("method")||"get",a=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(s=i.data("method"),a=n.href(i),o=i.data("params")||null);return u={type:s||"GET",data:o,dataType:l,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),n.fire(i,"ajax:beforeSend",[t,s])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:n.isCrossDomain(a)},r&&(u.xhrFields={withCredentials:r}),a&&(u.url=a),n.ajax(u)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var s=n.href(i),a=i.data("method"),o=i.attr("target"),r=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+s+'"></form>'),c='<input name="_method" value="'+a+'" type="hidden" />';l===e||r===e||n.isCrossDomain(s)||(c+='<input name="'+l+'" value="'+r+'" type="hidden" />'),o&&u.attr("target",o),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),i!==e&&t[n](i),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),s=!1;return i?(n.fire(t,"confirm")&&(s=n.confirm(i),e=n.fire(t,"confirm:complete",[s])),s&&e):!0},blankInputs:function(e,n,i){var s,a,o=t(),r=n||"input,textarea",l=e.find(r);return l.each(function(){if(s=t(this),a=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val(),!a==!i){if(s.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;o=o.add(s)}}),o.length?o:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var s=t(this),a=s.data("method"),o=s.data("params"),r=i.metaKey||i.ctrlKey;if(!n.allowAction(s))return n.stopEverything(i);if(!r&&s.is(n.linkDisableSelector)&&n.disableElement(s),s.data("remote")!==e){if(r&&(!a||"GET"===a)&&!o)return!0;var l=n.handleRemote(s);return l===!1?n.enableElement(s):l.error(function(){n.enableElement(s)}),!1}return s.data("method")?(n.handleMethod(s),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var s=n.handleRemote(i);return s===!1?n.enableFormElement(i):s.error(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var s,a,o=t(this),r=o.data("remote")!==e;if(!n.allowAction(o))return n.stopEverything(i);if(o.attr("novalidate")==e&&(s=n.blankInputs(o,n.requiredInputSelector),s&&n.fire(o,"ajax:aborted:required",[s])))return n.stopEverything(i);if(r){if(a=n.nonBlankInputs(o,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return n.handleRemote(o),!1}setTimeout(function(){n.disableFormElements(o)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var s=i.attr("name"),a=s?{name:s,value:i.val()}:null;i.closest("form").data("ujs:submit-button",a)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),function(t,e){function n(e,n){var s,a,o,r=e.nodeName.toLowerCase();return"area"===r?(s=e.parentNode,a=s.name,e.href&&a&&"map"===s.nodeName.toLowerCase()?(o=t("img[usemap=#"+a+"]")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,s,a=t(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),s=isNaN(i);return(s||i>=0)&&n(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function s(e,n,i,s){return t.each(a,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var a="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?r["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var s,a=t.ui[e].prototype;for(s in i)a.plugins[s]=a.plugins[s]||[],a.plugins[s].push([n,i[s]])},call:function(t,e,n){var i,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<s.length;i++)t.options[s[i][0]]&&s[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",s=!1;return e[i]>0?!0:(e[i]=1,s=e[i]>0,e[i]=0,s)}})}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(a){}s(e)},t.widget=function(e,n,i){var s,a,o,r,l={},u=e.split(".")[0];e=e.split(".")[1],s=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[u]=t[u]||{},a=t[u][e],o=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,a,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),r=new n,r.options=t.widget.extend({},r.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},s=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,a=this._superApply;return this._super=t,this._superApply=s,e=i.apply(this,arguments),this._super=n,this._superApply=a,e}}()):void(l[e]=i)}),o.prototype=t.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix:e},l,{constructor:o,namespace:u,widgetName:e,widgetFullName:s}),a?(t.each(a._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete a._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(n){for(var s,a,o=i.call(arguments,1),r=0,l=o.length;l>r;r++)for(s in o[r])a=o[r][s],o[r].hasOwnProperty(s)&&a!==e&&(t.isPlainObject(a)?n[s]=t.isPlainObject(n[s])?t.widget.extend({},n[s],a):t.widget.extend({},a):n[s]=a);return n},t.widget.bridge=function(n,s){var a=s.prototype.widgetFullName||n;t.fn[n]=function(o){var r="string"==typeof o,l=i.call(arguments,1),u=this;return o=!r&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var i,s=t.data(this,a);return s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,l),i!==s&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,a);e?e.option(o||{})._init():t.data(this,a,new s(o,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var s,a,o,r=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(r={},s=n.split("."),n=s.shift(),s.length){for(a=r[n]=t.widget.extend({},this.options[n]),o=0;o<s.length-1;o++)a[s[o]]=a[s[o]]||{},a=a[s[o]];if(n=s.pop(),i===e)return a[n]===e?null:a[n];a[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];r[n]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var s,a=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=s=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),t.each(i,function(i,o){function r(){return e||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?s.delegate(c,u,r):n.bind(u,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var s,a,o=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(s in a)s in n||(n[s]=a[s]);return this.element.trigger(n,i),!(t.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,s,a){"string"==typeof s&&(s={effect:s});var o,r=s?s===!0||"number"==typeof s?n:s.effect||n:e;s=s||{},"number"==typeof s&&(s={duration:s}),o=!t.isEmptyObject(s),s.complete=a,s.delay&&i.delay(s.delay),o&&t.effects&&t.effects.effect[r]?i[e](s):r!==e&&i[r]?i[r](s.duration,s.easing,a):i.queue(function(n){t(this)[e](),a&&a.call(i[0]),n()})}})}(jQuery),function(t,e){var n=!1;t(document).mouseup(function(){n=!1}),t.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,a="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!a&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){var n=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(n=i.values&&i.values.length||1,s.length>n&&(s.slice(n).remove(),s=s.slice(0,n)),e=s.length;n>e;e++)o.push(a);this.handles=s.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,s,a,o,r,l,u,c=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-c.values(e));(s>n||s===n&&(e===c._lastChangedValue||c.values(e)===d.min))&&(s=n,a=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),l=a.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-a.width()/2,top:e.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,s,a;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),s=this._valueMax()-this._valueMin(),a=this._valueMin()+i*s,this._trimAlignValue(a)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,s,a;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&n>i||1===e&&i>n)&&(n=i),n!==this.values(e)&&(s=this.values(),s[e]=n,a=this._trigger("slide",t,{handle:this.handles[e],value:n,values:s}),i=this.values(e?0:1),a!==!1&&this.values(e,n,!0))):n!==this.value()&&(a=this._trigger("slide",t,{handle:this.handles[e],value:n}),a!==!1&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,s,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,s=arguments[0],a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(s[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,n){var i,s=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;s>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,s,a,o=this.options.range,r=this.options,l=this,u=this._animateOff?!1:r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[u?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},r.animate),1===i&&l.range[u?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:r.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},r.animate),1===i&&l.range[u?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:r.animate}))),e=n}):(i=this.value(),s=this._valueMin(),a=this._valueMax(),n=a!==s?(i-s)/(a-s)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(e){var i,s,a,o,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),i=this._start(e,r),i===!1))return}switch(o=this.options.step,s=a=this.options.values&&this.options.values.length?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/n);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/n);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;a=this._trimAlignValue(s+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;a=this._trimAlignValue(s-o)}this._slide(e,r,a)},click:function(t){t.preventDefault()},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){var e=function(){this.init=function(e,n){var i={outOf:65,applyOnInit:!0,toggleText:"Toggle between chart and table",autoOutdent:!1,outdentAll:!1};this.options=t.extend({},i,n);var s=function(){var t,e=3,n=document.createElement("div"),i=n.getElementsByTagName("i");do n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->";while(10>e&&i[0]);return e>4?e:t}();return this.ENABLED=!(s&&8>s),this.$table=e,this.$graph=t("<div/>").attr("aria-hidden","true"),this.$graph.attr("class",this.$table.attr("class")).addClass("mc-chart"),this.options.stacked=this.$table.hasClass("mc-stacked"),this.options.negative=this.$table.hasClass("mc-negative"),this.options.multiple=!this.options.stacked&&(this.$table.hasClass("mc-multiple")||this.$table.find("tbody tr").first().find("td").length>2),this.options.autoOutdent=this.options.autoOutdent||this.$table.hasClass("mc-auto-outdent"),this.options.outdentAll=this.options.outdentAll||this.$table.hasClass("mc-outdented"),this.options.multiple&&this.$graph.addClass("mc-multiple"),this.options.hasCaption=!!this.$table.find("caption").length,this.ENABLED&&(this.apply(),
this.options.applyOnInit||this.toggle()),this}};e.prototype.construct={},e.prototype.construct.thead=function(){var e=t("<div />",{"class":"mc-thead"}),n=t("<div />",{"class":"mc-tr"}),i="";return this.$table.find("th").each(function(e,n){i+='<div class="mc-th">',i+=t(n).html(),i+="</div>"}),n.append(i),e.append(n),e},e.prototype.construct.tbody=function(){var e=t("<div />",{"class":"mc-tbody"});return this.$table.find("tbody tr").each(function(n,i){var s=t("<div />",{"class":"mc-tr"}),a="";t(i).find("td").each(function(e,n){a+='<div class="mc-td">',a+=t(n).html(),a+="</div>"}),s.append(a),e.append(s)}),e},e.prototype.construct.caption=function(){var t=this.$table.find("caption");return t.clone()},e.prototype.construct.toggleLink=function(){var e=this;return t("<a />",{href:"#","class":"mc-toggle-link",text:this.options.toggleText}).on("click",function(t){e.toggle(t)})},e.prototype.constructChart=function(){var t=this.construct.thead.call(this),e=this.construct.tbody.call(this),n=this.construct.toggleLink.call(this);if(this.options.hasCaption){var i=this.construct.caption.call(this);this.$graph.append(i)}this.$table.before(n),this.$graph.append(t),this.$graph.append(e)},e.prototype.apply=function(){this.ENABLED&&(this.constructChart(),this.addClassesToHeader(),this.calculateMaxWidth(),this.applyWidths(),this.insert(),this.$table.addClass("visually-hidden"),this.applyOutdent())},e.prototype.toggle=function(t){this.$graph.toggle(),this.$table.toggleClass("visually-hidden"),t&&t.preventDefault()},e.prototype.utils={isFloat:function(t){return!isNaN(parseFloat(t))},stripValue:function(t){var e=new RegExp("\\,|\xa3|%|[a-z]","gi");return t.replace(e,"")},returnMax:function(t){for(var e=0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return e},isNegative:function(t){return 0>t}},e.prototype.addClassesToHeader=function(){var e=this.$graph.find(".mc-th").filter(":not(:first)");this.options.stacked&&(e.last().addClass("mc-stacked-header mc-header-total"),e=e.filter(":not(:last)")),e.addClass("mc-key-header").filter(":not(.mc-stacked-header)").each(function(e,n){t(n).addClass("mc-key-"+(e+1))})},e.prototype.calculateMaxWidth=function(){var e=this,n=[],i=0;this.$graph.find(".mc-tr").each(function(s,a){var o=t(a),r=o.find(".mc-td:not(:first)");if(e.options.stacked){r.last().addClass("mc-stacked-total");r=r.filter(":not(:last)")}o.find(".mc-td:first").addClass("mc-key-cell");var l=0;r.each(function(s,a){var o=t(a).addClass("mc-bar-cell").addClass("mc-bar-"+(s+1)),r=e.utils.stripValue(o.text());if(e.utils.isFloat(r)){var u=parseFloat(r,10),c=Math.abs(u);0===u&&o.addClass("mc-bar-zero"),e.options.negative&&(e.utils.isNegative(u)?(o.addClass("mc-bar-negative"),c>i&&(i=c)):o.addClass("mc-bar-positive")),u=c,e.options.stacked?l+=u:(l=u,n.push(u))}}),e.options.stacked&&n.push(l)});var s={};return s.max=parseFloat(e.utils.returnMax(n),10),s.single=parseFloat(this.options.outOf/s.max,10),this.options.negative&&(s.marginLeft=parseFloat(i,10)*s.single,s.maxNegative=parseFloat(i,10)),s},e.prototype.applyWidths=function(){this.dimensions=this.calculateMaxWidth();var e=this;this.$graph.find(".mc-tr").each(function(n,i){var s=t(i);s.find(".mc-bar-cell:not(.mc-bar-zero)").length;s.find(".mc-bar-cell").each(function(n,i){var s=t(i),a=parseFloat(e.utils.stripValue(s.text()),10),o=a*e.dimensions.single,r=Math.abs(a),l=Math.abs(o);if(e.options.negative)if(s.hasClass("mc-bar-positive"))s.css("margin-left",e.dimensions.marginLeft+"%");else if(r<e.dimensions.maxNegative){var u=(e.dimensions.maxNegative-r)*e.dimensions.single;s.css("margin-left",u+"%")}s.wrapInner("<span />"),s.css("width",l+"%")})})},e.prototype.insert=function(){this.$table.after(this.$graph)},e.prototype.applyOutdent=function(){var e=this;this.$graph.find(".mc-bar-cell");this.$graph.find(".mc-bar-cell").each(function(n,i){var s=t(i),a=parseFloat(e.utils.stripValue(s.text()),10),o=s.children("span"),r=o.width()+10,l=s.width();parseFloat(s[0].style.width,10),s.height();e.options.stacked?r>l&&a>0&&s.addClass("mc-value-overflow"):(0===a&&s.addClass("mc-bar-outdented"),e.options.autoOutdent&&r>l||e.options.outdentAll?(s.addClass("mc-bar-outdented"),o.css({"margin-left":"100%",display:"inline-block"})):s.addClass("mc-bar-indented"))})},t.magnaCharta=function(t,n){return(new e).init(t,n)}}(jQuery);var stIsIE=!1;if(sorttable={init:function(){arguments.callee.done||(arguments.callee.done=!0,_timer&&clearInterval(_timer),document.createElement&&document.getElementsByTagName&&(sorttable.DATE_RE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/,forEach(document.getElementsByTagName("table"),function(t){-1!=t.className.search(/\bsortable\b/)&&sorttable.makeSortable(t)})))},makeSortable:function(t){if(0==t.getElementsByTagName("thead").length&&(the=document.createElement("thead"),the.appendChild(t.rows[0]),t.insertBefore(the,t.firstChild)),null==t.tHead&&(t.tHead=t.getElementsByTagName("thead")[0]),1==t.tHead.rows.length){sortbottomrows=[];for(var e=0;e<t.rows.length;e++)-1!=t.rows[e].className.search(/\bsortbottom\b/)&&(sortbottomrows[sortbottomrows.length]=t.rows[e]);if(sortbottomrows){null==t.tFoot&&(tfo=document.createElement("tfoot"),t.appendChild(tfo));for(var e=0;e<sortbottomrows.length;e++)tfo.appendChild(sortbottomrows[e]);delete sortbottomrows}headrow=t.tHead.rows[0].cells;for(var e=0;e<headrow.length;e++)headrow[e].className.match(/\bsorttable_nosort\b/)||(mtch=headrow[e].className.match(/\bsorttable_([a-z0-9]+)\b/),mtch&&(override=mtch[1]),mtch&&"function"==typeof sorttable["sort_"+override]?headrow[e].sorttable_sortfunction=sorttable["sort_"+override]:headrow[e].sorttable_sortfunction=sorttable.guessType(t,e),headrow[e].sorttable_columnindex=e,headrow[e].sorttable_tbody=t.tBodies[0],dean_addEvent(headrow[e],"click",sorttable.innerSortFunction=function(t){if(-1!=this.className.search(/\bsorttable_sorted\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted","sorttable_sorted_reverse"),this.removeChild(document.getElementById("sorttable_sortfwdind")),sortrevind=document.createElement("span"),sortrevind.id="sorttable_sortrevind",sortrevind.innerHTML=stIsIE?'&nbsp<font face="webdings">5</font>':"&nbsp;&#x25B4;",void this.appendChild(sortrevind);if(-1!=this.className.search(/\bsorttable_sorted_reverse\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted_reverse","sorttable_sorted"),this.removeChild(document.getElementById("sorttable_sortrevind")),sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML=stIsIE?'&nbsp<font face="webdings">6</font>':"&nbsp;&#x25BE;",void this.appendChild(sortfwdind);theadrow=this.parentNode,forEach(theadrow.childNodes,function(t){1==t.nodeType&&(t.className=t.className.replace("sorttable_sorted_reverse",""),t.className=t.className.replace("sorttable_sorted",""))}),sortfwdind=document.getElementById("sorttable_sortfwdind"),sortfwdind&&sortfwdind.parentNode.removeChild(sortfwdind),sortrevind=document.getElementById("sorttable_sortrevind"),sortrevind&&sortrevind.parentNode.removeChild(sortrevind),this.className+=" sorttable_sorted",sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML=stIsIE?'&nbsp<font face="webdings">6</font>':"&nbsp;&#x25BE;",this.appendChild(sortfwdind),row_array=[],col=this.sorttable_columnindex,rows=this.sorttable_tbody.rows;for(var e=0;e<rows.length;e++)row_array[row_array.length]=[sorttable.getInnerText(rows[e].cells[col]),rows[e]];row_array.sort(this.sorttable_sortfunction),tb=this.sorttable_tbody;for(var e=0;e<row_array.length;e++)tb.appendChild(row_array[e][1]);delete row_array}))}},guessType:function(t,e){sortfn=sorttable.sort_alpha;for(var n=0;n<t.tBodies[0].rows.length;n++)if(text=sorttable.getInnerText(t.tBodies[0].rows[n].cells[e]),""!=text){if(text.match(/^-?[\xa3$\xa4]?[\d,.]+%?$/))return sorttable.sort_numeric;if(possdate=text.match(sorttable.DATE_RE),possdate){if(first=parseInt(possdate[1]),second=parseInt(possdate[2]),first>12)return sorttable.sort_ddmm;if(second>12)return sorttable.sort_mmdd;sortfn=sorttable.sort_ddmm}}return sortfn},getInnerText:function(t){if(!t)return"";if(hasInputs="function"==typeof t.getElementsByTagName&&t.getElementsByTagName("input").length,null!=t.getAttribute("sorttable_customkey"))return t.getAttribute("sorttable_customkey");if("undefined"!=typeof t.textContent&&!hasInputs)return t.textContent.replace(/^\s+|\s+$/g,"");if("undefined"!=typeof t.innerText&&!hasInputs)return t.innerText.replace(/^\s+|\s+$/g,"");if("undefined"!=typeof t.text&&!hasInputs)return t.text.replace(/^\s+|\s+$/g,"");switch(t.nodeType){case 3:if("input"==t.nodeName.toLowerCase())return t.value.replace(/^\s+|\s+$/g,"");case 4:return t.nodeValue.replace(/^\s+|\s+$/g,"");case 1:case 11:for(var e="",n=0;n<t.childNodes.length;n++)e+=sorttable.getInnerText(t.childNodes[n]);return e.replace(/^\s+|\s+$/g,"");default:return""}},reverse:function(t){newrows=[];for(var e=0;e<t.rows.length;e++)newrows[newrows.length]=t.rows[e];for(var e=newrows.length-1;e>=0;e--)t.appendChild(newrows[e]);delete newrows},sort_numeric:function(t,e){return aa=parseFloat(t[0].replace(/[^0-9.-]/g,"")),isNaN(aa)&&(aa=0),bb=parseFloat(e[0].replace(/[^0-9.-]/g,"")),isNaN(bb)&&(bb=0),aa-bb},sort_alpha:function(t,e){return t[0]==e[0]?0:t[0]<e[0]?-1:1},sort_ddmm:function(t,e){return mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt1<dt2?-1:1},sort_mmdd:function(t,e){return mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt1<dt2?-1:1},shaker_sort:function(t,e){for(var n=0,i=t.length-1,s=!0;s;){s=!1;for(var a=n;i>a;++a)if(e(t[a],t[a+1])>0){var o=t[a];t[a]=t[a+1],t[a+1]=o,s=!0}if(i--,!s)break;for(var a=i;a>n;--a)if(e(t[a],t[a-1])<0){var o=t[a];t[a]=t[a-1],t[a-1]=o,s=!0}n++}}},document.addEventListener&&document.addEventListener("DOMContentLoaded",sorttable.init,!1),/WebKit/i.test(navigator.userAgent))var _timer=setInterval(function(){/loaded|complete/.test(document.readyState)&&sorttable.init()},10);window.onload=sorttable.init,dean_addEvent.guid=1,fixEvent.preventDefault=function(){this.returnValue=!1},fixEvent.stopPropagation=function(){this.cancelBubble=!0},Array.forEach||(Array.forEach=function(t,e,n){for(var i=0;i<t.length;i++)e.call(n,t[i],i,t)}),Function.prototype.forEach=function(t,e,n){for(var i in t)"undefined"==typeof this.prototype[i]&&e.call(n,t[i],i,t)},String.forEach=function(t,e,n){Array.forEach(t.split(""),function(i,s){e.call(n,i,s,t)})};var forEach=function(t,e,n){if(t){var i=Object;if(t instanceof Function)i=Function;else{if(t.forEach instanceof Function)return void t.forEach(e,n);"string"==typeof t?i=String:"number"==typeof t.length&&(i=Array)}i.forEach(t,e,n)}};Object.create||(Object.create=function(){function t(){}return function(e){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return t.prototype=e,new t}}()),function(t){"use strict";var e=t.GOVUK||{},n=function(t){if(this.trackers=[],"undefined"!=typeof t.universalId){var n=t.universalId;delete t.universalId,this.trackers.push(new e.GoogleAnalyticsUniversalTracker(n,t))}};n.prototype.sendToTrackers=function(t,e){for(var n=0,i=this.trackers.length;i>n;n++){var s=this.trackers[n],a=s[t];"function"==typeof a&&a.apply(s,e)}},n.load=function(){e.GoogleAnalyticsUniversalTracker.load()},n.prototype.trackPageview=function(t,e,n){this.sendToTrackers("trackPageview",arguments)},n.prototype.trackEvent=function(t,e,n){this.sendToTrackers("trackEvent",arguments)},n.prototype.trackShare=function(t){this.sendToTrackers("trackSocial",[t,"share",location.pathname])},n.prototype.setDimension=function(t,e){this.sendToTrackers("setDimension",arguments)},n.prototype.addLinkedTrackerDomain=function(t,e,n){this.sendToTrackers("addLinkedTrackerDomain",arguments)},e.Analytics=n,t.GOVUK=e}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{};n.analyticsPlugins=n.analyticsPlugins||{},n.analyticsPlugins.downloadLinkTracker=function(t){function i(t){var i=s(t),a=i.attr("href"),o={transport:"beacon"},r=e.trim(i.text());r&&(o.label=r),n.analytics.trackEvent("Download Link Clicked",a,o)}function s(t){var n=e(t.target);return n.is("a")||(n=n.parents("a")),n}var t=t||{},a=t.selector;a&&e("body").on("click",a,i)},t.GOVUK=n}(window),function(t){"use strict";var e=t.GOVUK||{};e.analyticsPlugins=e.analyticsPlugins||{},e.analyticsPlugins.error=function(n){function i(t){return t&&s?s.test(t)?!0:!1:!0}var n=n||{},s=n.filenameMustMatch,a=function(t){var n=t.filename,s=n+": "+t.lineno;i(n)&&e.analytics.trackEvent("JavaScript Error",t.message,{label:s,value:1,nonInteraction:!0})};t.addEventListener?t.addEventListener("error",a,!1):t.attachEvent?t.attachEvent("onerror",a):t.onerror=a},t.GOVUK=e}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{};n.analyticsPlugins=n.analyticsPlugins||{},n.analyticsPlugins.externalLinkTracker=function(){function t(t){var s=i(t),a={transport:"beacon"},o=s.attr("href"),r=e.trim(s.text());r&&(a.label=r),n.analytics.trackEvent("External Link Clicked",o,a)}function i(t){var n=e(t.target);return n.is("a")||(n=n.parents("a")),n}var s=n.analyticsPlugins.externalLinkTracker.getHostname(),a='a[href^="http"]:not(a[href*="'+s+'"])';e("body").on("click",a,t)},n.analyticsPlugins.externalLinkTracker.getHostname=function(){return t.location.hostname},t.GOVUK=n}(window),function(t){"use strict";function e(){"function"==typeof t.ga&&ga.apply(t,arguments)}var n=t.GOVUK||{},i=function(t,n){function i(){e("create",t,n)}function s(){e("set","anonymizeIp",!0)}"string"==typeof n&&(n={cookieDomain:n}),i(),s()};i.load=function(){!function(t,e,n,i,s,a,o){t.GoogleAnalyticsObject=s,t[s]=t[s]||function(){(t[s].q=t[s].q||[]).push(arguments)},t[s].l=1*new Date,a=e.createElement(n),o=e.getElementsByTagName(n)[0],a.async=1,a.src=i,o.parentNode.insertBefore(a,o)}(t,document,"script","https://www.google-analytics.com/analytics.js","ga")},i.prototype.trackPageview=function(t,n,i){var i=i||{};if("string"==typeof t){var s={page:t};"string"==typeof n&&(s.title=n),i.transport&&(s.transport=i.transport),e("send","pageview",s)}else e("send","pageview")},i.prototype.trackEvent=function(t,n,i){var s,i=i||{},a={hitType:"event",eventCategory:t,eventAction:n};"string"==typeof i.label&&(a.eventLabel=i.label),"string"==typeof i.page&&(a.page=i.page),(i.value||0===i.value)&&(s=parseInt(i.value,10),"number"!=typeof s||isNaN(s)||(a.eventValue=s)),i.nonInteraction&&(a.nonInteraction=1),i.transport&&(a.transport=i.transport),e("send",a)},i.prototype.trackSocial=function(t,n,i){e("send",{hitType:"social",socialNetwork:t,socialAction:n,socialTarget:i})},i.prototype.addLinkedTrackerDomain=function(t,n,i){e("create",t,"auto",{name:n}),e("require","linker"),e(n+".require","linker"),e("linker:autoLink",[i]),e(n+".linker:autoLink",[i]),e(n+".set","anonymizeIp",!0),e(n+".send","pageview")},i.prototype.setDimension=function(t,n){e("set","dimension"+t,String(n))},n.GoogleAnalyticsUniversalTracker=i,t.GOVUK=n}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{};n.analyticsPlugins=n.analyticsPlugins||{},n.analyticsPlugins.mailtoLinkTracker=function(){function t(t){var s=i(t),a={transport:"beacon"},o=s.attr("href"),r=e.trim(s.text());r&&(a.label=r),n.analytics.trackEvent("Mailto Link Clicked",o,a)}function i(t){var n=e(t.target);return n.is("a")||(n=n.parents("a")),n}var s='a[href^="mailto:"]';e("body").on("click",s,t)},t.GOVUK=n}(window),function(t){"use strict";var e=t.GOVUK||{};e.analyticsPlugins=e.analyticsPlugins||{},e.analyticsPlugins.printIntent=function(){var n=function(){e.analytics.trackEvent("Print Intent",document.location.pathname),e.analytics.trackPageview("/print"+document.location.pathname)};if(t.matchMedia){var i=t.matchMedia("print"),s=0;i.addListener(function(t){t.matches||0!==s||(n(),s++,setTimeout(function(){s=0},3e3))})}t.onafterprint&&(t.onafterprint=n)},t.GOVUK=e}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{};n.anchorButtons={config:{selector:'a[role="button"]',keycodes:[32]},triggerClickOnTarget:function(t){var n=t.charCode||t.keyCode;-1!==e.inArray(n,this.config.keycodes)&&(t.preventDefault(),e(t.target).trigger("click"))},init:function(t){this.config=e.extend(this.config,t),e(this.config.selector).length>0&&e(document).on("keyup",this.config.selector,this.triggerClickOnTarget.bind(this))}},t.GOVUK=n}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{};n.Modules=n.Modules||{},n.modules={find:function(t){var n,i="[data-module]",t=t||e("body");return n=t.find(i),t.is(i)&&(n=n.add(t)),n},start:function(t){function i(t){return a(s(t))}function s(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}for(var o=this.find(t),r=0,l=o.length;l>r;r++){var u,c=e(o[r]),d=i(c.data("module")),h=c.data("module-started");"function"!=typeof n.Modules[d]||h||(u=new n.Modules[d],u.start(c),c.data("module-started",!0))}}},t.GOVUK=n}(window),function(t){"use strict";var e=t.GOVUK||{};e.Modules=e.Modules||{},e.Modules.AutoTrackEvent=function(){this.start=function(t){var n={nonInteraction:1},i=t.data("track-category"),s=t.data("track-action"),a=t.data("track-label"),o=t.data("track-value");"string"==typeof a&&(n.label=a),(o||0===o)&&(n.value=o),e.analytics&&e.analytics.trackEvent&&e.analytics.trackEvent(i,s,n)}},t.GOVUK=e}(window),function(t){"use strict";function e(t){this.$el=n(t.el),this._loadOption(t,"name"),this._loadOption(t,"customDimensionIndex",null),this._loadOption(t,"cohorts"),this._loadOption(t,"runImmediately",!0),this._loadOption(t,"defaultWeight",1),this._loadOption(t,"contentExperimentId",null),this._loadOption(t,"cookieDuration",30),this.runImmediately&&this.run()}var n=t.jQuery,i=t.GOVUK||{};e.prototype._loadOption=function(t,e,n){if(void 0!==t[e]&&(this[e]=t[e]),void 0===this[e]){if(void 0===n)throw new Error(e+" option is required for a multivariate test");this[e]=n}},e.prototype.run=function(){var t=this.getCohort();t&&(this.setUpContentExperiment(t),this.setCustomVar(t),this.executeCohort(t),this.createDummyEvent(t))},e.prototype.executeCohort=function(t){var e=this.cohorts[t];e.callback&&("string"==typeof e.callback?this[e.callback]():e.callback()),e.html&&(this.$el.html(e.html),this.$el.show())},e.prototype.getCohort=function(){var t=i.cookie(this.cookieName());return t&&this.cohorts[t]||(t=this.chooseRandomCohort(),i.cookie(this.cookieName(),t,{days:this.cookieDuration})),t},e.prototype.setCustomVar=function(t){if(this.customDimensionIndex&&this.customDimensionIndex.constructor===Array)for(var e=0;e<this.customDimensionIndex.length;e++)this.setDimension(t,this.customDimensionIndex[e]);else this.customDimensionIndex&&this.setDimension(t,this.customDimensionIndex)},e.prototype.setDimension=function(t,e){i.analytics.setDimension(e,this.cookieName()+"__"+t)},e.prototype.setUpContentExperiment=function(t){var e=this.contentExperimentId,n=this.cohorts[t].variantId;"undefined"!=typeof e&&"undefined"!=typeof n&&"function"==typeof window.ga&&(window.ga("set","expId",e),window.ga("set","expVar",n))},e.prototype.createDummyEvent=function(t){i.analytics.trackEvent(this.cookieName(),"run",{nonInteraction:!0})},e.prototype.weightedCohortNames=function(){var t=[],e=this.defaultWeight;return n.each(this.cohorts,function(n,i){var s,a;for(s="undefined"==typeof i.weight?e:i.weight,a=0;s>a;a++)t.push(n)}),t},e.prototype.chooseRandomCohort=function(){var t=this.weightedCohortNames();return t[Math.floor(Math.random()*t.length)]},e.prototype.cookieName=function(){return"multivariatetest_cohort_"+this.name},i.MultivariateTest=e,t.GOVUK=i}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{},i=function(t,n){this.$el=e(t),this.$extraLinks=this.$el.find("li:not("+n+")"),this.$extraLinks.length>1&&(this.addToggleLink(),this.hideExtraLinks())};i.prototype={toggleText:function(){return this.$extraLinks.length>1?"+"+this.$extraLinks.length+" others":"+"+this.$extraLinks.length+" other"},addToggleLink:function(){this.$toggleLink=e('<a href="#">'+this.toggleText()+"</a>"),this.$toggleLink.click(e.proxy(this.toggleLinks,this)),this.$toggleLink.insertAfter(this.$el)},toggleLinks:function(t){t.preventDefault(),this.$toggleLink.remove(),this.showExtraLinks()},hideExtraLinks:function(){this.$extraLinks.addClass("visuallyhidden"),e(window).trigger("govuk.pageSizeChanged")},showExtraLinks:function(){this.$extraLinks.removeClass("visuallyhidden"),e(window).trigger("govuk.pageSizeChanged")}},n.PrimaryList=i,n.primaryLinks={init:function(t){e(t).parent().each(function(e,i){new n.PrimaryList(i,t)})}},t.GOVUK=n}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{},i=function(t,n){this.selectedClass="selected",this.focusedClass="focused",void 0!==n&&e.each(n,function(t,e){this[t]=e}.bind(this)),"string"==typeof t?(this.selector=t,this.setInitialState(e(this.selector))):void 0!==t&&(this.$elms=t,this.setInitialState(this.$elms)),this.addEvents()};i.prototype.addEvents=function(){"undefined"!=typeof this.$elms?this.addElementLevelEvents():this.addDocumentLevelEvents()},i.prototype.setInitialState=function(t){t.each(function(t,n){var i=e(n);i.is(":checked")&&this.markSelected(i)}.bind(this))},i.prototype.markFocused=function(t,e){"focused"===e?t.parent("label").addClass(this.focusedClass):t.parent("label").removeClass(this.focusedClass)},i.prototype.markSelected=function(t){var n;"radio"===t.attr("type")?(n=t.attr("name"),e(t[0].form).find('input[name="'+n+'"]').parent("label").removeClass(this.selectedClass),t.parent("label").addClass(this.selectedClass)):t.is(":checked")?t.parent("label").addClass(this.selectedClass):t.parent("label").removeClass(this.selectedClass)},i.prototype.addElementLevelEvents=function(){this.clickHandler=this.getClickHandler(),this.focusHandler=this.getFocusHandler({level:"element"}),this.$elms.on("click",this.clickHandler).on("focus blur",this.focusHandler)},i.prototype.addDocumentLevelEvents=function(){this.clickHandler=this.getClickHandler(),this.focusHandler=this.getFocusHandler({level:"document"}),e(document).on("click",this.selector,this.clickHandler).on("focus blur",this.selector,this.focusHandler)},i.prototype.getClickHandler=function(){return function(t){this.markSelected(e(t.target))}.bind(this)},i.prototype.getFocusHandler=function(t){var n="document"===t.level?"focusin":"focus";return function(t){var i=t.type===n?"focused":"blurred";this.markFocused(e(t.target),i)}.bind(this)},i.prototype.destroy=function(){"undefined"!=typeof this.selector?e(document).off("click",this.selector,this.clickHandler).off("focus blur",this.selector,this.focusHandler):this.$elms.off("click",this.clickHandler).off("focus blur",this.focusHandler)},n.SelectionButtons=i,t.GOVUK=n}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{},i={_hasScrolled:!1,_scrollTimeout:!1,init:function(){var s=e(".js-stick-at-top-when-scrolling");s.length>0&&(i.$els=s,i._scrollTimeout===!1&&(e(t).scroll(i.onScroll),i._scrollTimeout=t.setInterval(i.checkScroll,50)),e(t).resize(i.onResize)),n.stopScrollingAtFooter&&s.each(function(t,i){var s=e(i).find("img");if(s.length>0){var a=new Image;a.onload=function(){n.stopScrollingAtFooter.addEl(e(i),e(i).outerHeight())},a.src=s.attr("src")}else n.stopScrollingAtFooter.addEl(e(i),e(i).outerHeight())})},onScroll:function(){i._hasScrolled=!0},checkScroll:function(){if(i._hasScrolled===!0){i._hasScrolled=!1;var n=e(t).scrollTop();i.$els.each(function(s,a){var o=e(a),r=o.data("scrolled-from");r&&r>n?i.release(o):e(t).width()>768&&n>=o.offset().top&&i.stick(o)})}},stick:function(t){if(!t.hasClass("content-fixed")){t.data("scrolled-from",t.offset().top);var e=Math.max(t.height(),1);t.before('<div class="shim" style="width: '+t.width()+"px; height: "+e+'px">&nbsp;</div>'),t.css("width",t.width()+"px").addClass("content-fixed")}},release:function(t){t.hasClass("content-fixed")&&(t.data("scrolled-from",!1),t.removeClass("content-fixed").css("width",""),t.siblings(".shim").remove())}};n.stickAtTopWhenScrolling=i,t.GOVUK=n}(window),function(t){"use strict";var e=t.jQuery,n=t.GOVUK||{},i={_pollingId:null,_isPolling:!1,_hasScrollEvt:!1,_els:[],addEl:function(n,s){var a;if(n.length){a=parseInt(n.css("top"),10),a=isNaN(a)?0:a,i.updateFooterTop(),e(t).on("govuk.pageSizeChanged",i.updateFooterTop);var o=e("<div></div>");o.insertBefore(n);var r=o.offset().top-o.position().top;o.remove();var l={$fixedEl:n,height:s+a,fixedTop:s+r,state:"fixed"};i._els.push(l),i.initTimeout()}},updateFooterTop:function(){var t=e(".js-footer:eq(0)");return 0===t.length?0:void(i.footerTop=t.offset().top-10)},initTimeout:function(){i._hasScrollEvt===!1&&(e(window).scroll(i.onScroll),i._hasScrollEvt=!0)},onScroll:function(){i._isPolling===!1&&i.startPolling()},startPolling:function(){return window.requestAnimationFrame?function(){var t=function(){i.checkScroll(),i._isPolling===!0&&i.startPolling()};i._pollingId=window.requestAnimationFrame(t),i._isPolling=!0}:function(){i._pollingId=window.setInterval(i.checkScroll,16),i._isPolling=!0}}(),stopPolling:function(){return window.requestAnimationFrame?function(){window.cancelAnimationFrame(i._pollingId),i._isPolling=!1}:function(){window.clearInterval(i._pollingId),i._isPolling=!1}}(),checkScroll:function(){var t=e(window).scrollTop();return t<i.cachedScrollTop+2&&t>i.cachedScrollTop-2?void i.stopPolling():(i.cachedScrollTop=t,void e.each(i._els,function(e,n){var s=t+n.height;s>i.footerTop?i.stick(n):i.unstick(n)}))},stick:function(t){"fixed"===t.state&&"fixed"===t.$fixedEl.css("position")&&(t.$fixedEl.css({position:"absolute",top:i.footerTop-t.fixedTop}),t.state="absolute")},unstick:function(t){"absolute"===t.state&&(t.$fixedEl.css({position:"",top:""}),t.state="fixed")}};n.stopScrollingAtFooter=i,e(t).load(function(){e(t).trigger("govuk.pageSizeChanged")}),t.GOVUK=n}(window),function(t){"use strict";var e={},n=!1,i=function(n){return"undefined"==typeof e[n]&&(document.getElementById(n)?e[n]=t("<div />").html(t(document.getElementById(n)).html().trim()).text():window.templates&&templates[n]&&(e[n]=templates[n])),e[n]},s=function(){var i;if(n===!1)if("undefined"==typeof window.templates)t('script[type="text/mustache"]').each(function(n,s){i=t(s).attr("id"),e[i]=t("<div />").html(t(s).html().trim()).text()});else if(window.templates)for(i in templates)e[i]=templates[i]},a=function(n,a){s();var o=i(n);if("undefined"==typeof o)t.error("Unknown template "+n);else if("object"==typeof o)return o.render(a,e);return window.Hogan?window.Hogan.compile(o).render(a,e):void t.error("Must have Hogan.js to load string templates")};t.fn.mustache=function(t,e){return this.html(a(t,e))},t.mustache=function(t,e){return a(t,e)}}(jQuery),"undefined"==typeof window.Hogan&&(window.Hogan={}),function(t,e){function n(t){return String(null===t||void 0===t?"":t)}function i(t){return t=n(t),u.test(t)?t.replace(s,"&amp;").replace(a,"&lt;").replace(o,"&gt;").replace(r,"&#39;").replace(l,"&quot;"):t}t.Template=function(t,n,i,s){this.r=t||this.r,this.c=i,this.options=s,this.text=n||"",this.buf=e?[]:""},t.Template.prototype={r:function(t,e,n){return""},v:i,t:n,render:function(t,e,n){return this.ri([t],e||{},n)},ri:function(t,e,n){return this.r(t,e,n)},rp:function(t,e,n,i){var s=n[t];return s?(this.c&&"string"==typeof s&&(s=this.c.compile(s,this.options)),s.ri(e,n,i)):""},rs:function(t,e,n){var i=t[t.length-1];if(!c(i))return void n(t,e,this);for(var s=0;s<i.length;s++)t.push(i[s]),n(t,e,this),t.pop()},s:function(t,e,n,i,s,a,o){var r;return c(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ls(t,e,n,i,s,a,o)),r=""===t||!!t,!i&&r&&e&&e.push("object"==typeof t?t:e[e.length-1]),r)},d:function(t,e,n,i){var s=t.split("."),a=this.f(s[0],e,n,i),o=null;if("."===t&&c(e[e.length-2]))return e[e.length-1];for(var r=1;r<s.length;r++)a&&"object"==typeof a&&s[r]in a?(o=a,a=a[s[r]]):a="";return i&&!a?!1:(i||"function"!=typeof a||(e.push(o),a=this.lv(a,e,n),e.pop()),a)},f:function(t,e,n,i){for(var s=!1,a=null,o=!1,r=e.length-1;r>=0;r--)if(a=e[r],a&&"object"==typeof a&&t in a){s=a[t],o=!0;break}return o?(i||"function"!=typeof s||(s=this.lv(s,e,n)),s):i?!1:""},ho:function(t,e,n,i,s){var a=this.c,o=this.options;o.delimiters=s;var i=t.call(e,i);return i=null==i?String(i):i.toString(),this.b(a.compile(i,o).render(e,n)),!1},b:e?function(t){this.buf.push(t)}:function(t){this.buf+=t},fl:e?function(){var t=this.buf.join("");return this.buf=[],t}:function(){var t=this.buf;return this.buf="",t},ls:function(t,e,n,i,s,a,o){var r=e[e.length-1],l=null;if(!i&&this.c&&t.length>0)return this.ho(t,r,n,this.text.substring(s,a),o);if(l=t.call(r),"function"==typeof l){if(i)return!0;if(this.c)return this.ho(l,r,n,this.text.substring(s,a),o)}return l},lv:function(t,e,i){var s=e[e.length-1],a=t.call(s);return"function"==typeof a&&(a=n(a.call(s)),this.c&&~a.indexOf("{{"))?this.c.compile(a,this.options).render(s,i):n(a)}};var s=/&/g,a=/</g,o=/>/g,r=/\'/g,l=/\"/g,u=/[&<>\"\']/,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(Hogan),window.templates={},window.templates["documents/_filter_selections"]=new Hogan.Template(function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span class="count">'),i.b(i.v(i.f("result_count",t,e,0))),i.b("</span> <strong>"),i.b(i.v(i.f("pluralized_result_type",t,e,0))),i.b("</strong>"),i.b("\n"+n),i.b('<span class="topics-selections">'),i.b("\n"+n),i.s(i.f("topics",t,e,1),t,e,0,134,287,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("    about <strong>"),n.b(n.v(n.f("name",t,e,0))),n.b('</strong> <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" data-field="topics" data-val="'),n.b(n.v(n.f("value",t,e,0))),n.b('" title="Remove '),n.b(n.v(n.f("name",t,e,0))),n.b(' filter">&times;</a> '),n.b(n.v(n.f("joining",t,e,0))),n.b("\n")}),t.pop()),i.b("</span>"),i.b("\n"+n),i.b('<span class="departments-selections">'),i.b("\n"+n),i.s(i.f("departments",t,e,1),t,e,0,363,518,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("    by <strong>"),n.b(n.v(n.f("name",t,e,0))),n.b('</strong> <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" data-field="departments" data-val="'),n.b(n.v(n.f("value",t,e,0))),n.b('" title="Remove '),n.b(n.v(n.f("name",t,e,0))),n.b(' filter">&times;</a> '),n.b(n.v(n.f("joining",t,e,0))),n.b("\n")}),t.pop()),i.b("</span>"),i.b("\n"+n),i.s(i.f("world_locations_any?",t,e,1),t,e,0,568,817,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("from"),i.b("\n"+n),i.b('<span class="locations-selections">'),i.b("\n"+n),i.s(i.f("world_locations",t,e,1),t,e,0,632,788,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("    <strong>"),n.b(n.v(n.f("name",t,e,0))),n.b('</strong> <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" data-field="world_locations" data-val="'),n.b(n.v(n.f("value",t,e,0))),n.b('" title="Remove '),n.b(n.v(n.f("name",t,e,0))),n.b(' filter">&times;</a> '),n.b(n.v(n.f("joining",t,e,0))),n.b("\n")}),t.pop()),i.b("</span>"),i.b("\n")}),t.pop()),i.b("\n"+n),i.s(i.f("keywords",t,e,1),t,e,0,857,1086,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("  containing"),i.b("\n"+n),i.b('  <span class="keyword-selections">'),i.b("\n"+n),i.b("    <strong>"),i.b(i.v(i.d("keywords.name",t,e,0))),i.b('</strong> <a href="'),i.b(i.v(i.d("keywords.url",t,e,0))),i.b('" data-field="keywords" data-val="'),i.b(i.v(i.d("keywords.name",t,e,0))),i.b('" title="Remove '),i.b(i.v(i.d("keywords.name",t,e,0))),i.b(' filter">&times;</a>'),i.b("\n"+n),i.b("  </span>"),i.b("\n")}),t.pop()),i.b("\n"+n),i.s(i.f("filtering_command_and_act_papers?",t,e,1),t,e,0,1139,1362,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('  <span class="official-document-status">which are <strong>Command or Act papers <a data-field="official_document_status" data-val="command_and_act_papers" title="Remove official status filter">&times;</a></strong></span>'),n.b("\n")}),t.pop()),i.s(i.f("filtering_command_papers_only?",t,e,1),t,e,0,1436,1649,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('  <span class="official-document-status">which are <strong>Command papers <a data-field="official_document_status" data-val="command_papers_only" title="Remove official status filter">&times;</a></strong></span>'),n.b("\n")}),t.pop()),i.s(i.f("filtering_act_papers_only?",t,e,1),t,e,0,1716,1921,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('  <span class="official-document-status">which are <strong>Act papers <a data-field="official_document_status" data-val="act_papers_only" title="Remove official status filter">&times;</a></strong></span>'),
n.b("\n")}),t.pop()),i.b("\n"+n),i.s(i.f("include_world_location_news",t,e,1),t,e,0,1986,2088,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('  <span class="world-location-news">'),i.b("\n"+n),i.b("    <strong>including location-specific news</strong>"),i.b("\n"+n),i.b("  </span>"),i.b("\n")}),t.pop()),i.b("\n"+n),i.s(i.f("date_from",t,e,1),t,e,0,2136,2189,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("published <strong>after&nbsp;"),n.b(n.v(n.f("date_from",t,e,0))),n.b("</strong>"),n.b("\n")}),t.pop()),i.b("\n"+n),i.s(i.f("date_to",t,e,1),t,e,0,2217,2269,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("published <strong>before&nbsp;"),n.b(n.v(n.f("date_to",t,e,0))),n.b("</strong>"),n.b("\n")}),t.pop()),i.fl()}),window.templates["documents/_filter_table"]=new Hogan.Template(function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("results_any?",t,e,1),t,e,0,17,1707,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('  <ol class="js-document-list document-list">'),i.b("\n"+n),i.s(i.f("results",t,e,1),t,e,0,80,1022,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('      <li id="'),i.b(i.v(i.f("type",t,e,0))),i.b("_"),i.b(i.v(i.f("id",t,e,0))),i.b('" class="document-row">'),i.b("\n"+n),i.b('        <h3><a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('">'),i.b(i.v(i.f("title",t,e,0))),i.b("</a></h3>"),i.b("\n"+n),i.b('        <ul class="attributes">'),i.b("\n"+n),i.b("          <li>"),i.b(i.t(i.f("display_date_microformat",t,e,0))),i.b("</li>"),i.b("\n"+n),i.b('          <li class="organisations">'),i.b(i.t(i.f("organisations",t,e,0))),i.b("</li>"),i.b("\n"+n),i.b('          <li class="display-type">'),i.b(i.v(i.f("display_type",t,e,0))),i.b("</li>"),i.b("\n"+n),i.s(i.f("field_of_operation",t,e,1),t,e,0,416,500,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('            <li class="field-of-operation">'),n.b(n.t(n.f("field_of_operation",t,e,0))),n.b("</li>"),n.b("\n")}),t.pop()),i.s(i.f("topics",t,e,1),t,e,0,545,605,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('            <li class="topics">'),n.b(n.t(n.f("topics",t,e,0))),n.b("</li>"),n.b("\n")}),t.pop()),i.s(i.f("publication_collections",t,e,1),t,e,0,655,746,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('            <li class="document-collections">'),n.b(n.t(n.f("publication_collections",t,e,0))),n.b("</li>"),n.b("\n")}),t.pop()),i.b("        </ul>"),i.b("\n"+n),i.s(i.f("historic?",t,e,1),t,e,0,811,991,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("government_name",t,e,1),t,e,0,842,962,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <p class="historic">'),i.b("\n"+n),i.b("            First published during the "),i.b(i.v(i.f("government_name",t,e,0))),i.b("\n"+n),i.b("            </p>"),i.b("\n")}),t.pop())}),t.pop()),i.b("      </li>"),i.b("\n")}),t.pop()),i.b("  </ol>"),i.b("\n"+n),i.s(i.f("more_pages?",t,e,1),t,e,0,1061,1690,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <nav id="show-more-documents" role="navigation">'),i.b("\n"+n),i.b('      <ul class="previous-next-navigation">'),i.b("\n"+n),i.s(i.f("prev_page?",t,e,1),t,e,0,1182,1400,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('          <li class="previous">'),i.b("\n"+n),i.b('            <a href="'),i.b(i.v(i.f("prev_page_url",t,e,0))),i.b('">Previous <span class="visuallyhidden">page</span> <span class="page-numbers">'),i.b(i.v(i.f("prev_page",t,e,0))),i.b(" of "),i.b(i.v(i.f("total_pages",t,e,0))),i.b("</span></a>"),i.b("\n"+n),i.b("          </li>"),i.b("\n")}),t.pop()),i.s(i.f("next_page?",t,e,1),t,e,0,1439,1649,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('          <li class="next">'),i.b("\n"+n),i.b('            <a href="'),i.b(i.v(i.f("next_page_url",t,e,0))),i.b('">Next <span class="visuallyhidden">page</span> <span class="page-numbers">'),i.b(i.v(i.f("next_page",t,e,0))),i.b(" of "),i.b(i.v(i.f("total_pages",t,e,0))),i.b("</span></a>"),i.b("\n"+n),i.b("          </li>"),i.b("\n")}),t.pop()),i.b("      </ul>"),i.b("\n"+n),i.b("    </nav>"),i.b("\n")}),t.pop())}),t.pop()),i.s(i.f("results_any?",t,e,1),t,e,1,0,0,"")||(i.b('  <div class="no-results">'),i.b("\n"+n),i.b("    <h2>"),i.b(i.v(i.f("no_results_title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b("    <p>"),i.b(i.v(i.f("no_results_description",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("    <h3>"),i.b(i.t(i.f("no_results_tna_heading",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("    <p>"),i.b(i.t(i.f("no_results_tna_link",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("  </div>"),i.b("\n")),i.fl()}),function(t){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.instances={},window.GOVUK.init=function(t,e){function n(t,e){var n=new t(e);return s(n),n}function i(t,e){return t.init(e),t}function s(t){GOVUK.instances[t.constructor.name]=GOVUK.instances[t.constructor.name]||[],GOVUK.instances[t.constructor.name].push(t)}return"function"==typeof t?n(t,e):i(t,e)}}(jQuery),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var n=function(){e(document).on("click","form input[type=submit]",function(){var t=e(this),n=t.attr("name"),i=t.val();t.data("confirm")||(t.before('<input type="hidden" name="'+n+'" value="'+i+'">'),t.attr("disabled","disabled"),t.closest("form").submit())})};t.GOVUK.doubleClickProtection=n}.call(this),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var n={init:function(){n.$sets=e(".js-duplicate-fields"),n.addButton(),n.removeButton(),n.hideDestroyedFields()},addButton:function(){n.$sets.each(function(){var t=e(this),i=e('<a href="#" class="btn btn-default add-bottom-margin add_new js-add-button">Add another</a>');t.append(i),i.on("click",n.addFields)})},addFields:function(t){t.preventDefault();var i=e(t.target),s=i.closest(".js-duplicate-fields"),a=s.find(".js-duplicate-fields-set").last(),o=a.clone(!0);o.find("input[type=text], input[type=hidden], textarea").val(""),o.show(),n.incrementIndexes(o),i.before(o)},removeButton:function(){n.$sets.each(function(){var t=e(this),i=e('<a href="#" class="btn btn-danger js-remove-button">Remove</a>'),s=t.find(".js-duplicate-fields-set");s.append(i),s.find("a.js-remove-button").on("click",n.removeFields)})},removeFields:function(t){t.preventDefault();var i=e(t.target),s=i.closest(".js-duplicate-fields-set"),a=n.destroyInputFor(s);s.hide(),s.find("input").val(""),s.append(a)},destroyInputFor:function(t){var n=t.find("input[type=text], textarea").first(),i=n.attr("name"),s=n.attr("id"),a=s.replace(/_[a-zA-Z]+$/,"__destroy"),o=i.replace(/\[[_a-zA-Z]+\]$/,"[_destroy]");return e('<input class="js-hidden-destroy" id="'+a+'" name="'+o+'" type="hidden" value="true" />')},hideDestroyedFields:function(){n.$sets.each(function(){var t=e(this),n=t.find('.js-hidden-destroy[value="true"], .js-hidden-destroy[value="1"]'),i=n.closest(".js-duplicate-fields-set");i.hide()})},incrementIndexes:function(t){t.find("label,input,textarea,select").each(function(t,n){var i,s=e(n),a=s.attr("name"),o=s.attr("id"),r=s.attr("for"),l=!1,u=/(.*)\[([0-9]+)\](.*?)$/,c=/(.*)_([0-9]+)_(.*?)$/;a&&u.exec(a)&&(i=u.exec(a),l=parseInt(i[2],10),s.attr("name",i[1]+"["+(l+1)+"]"+i[3])),c.exec(o)&&(i=c.exec(o),l===!1&&(l=parseInt(i[2],10)),s.attr("id",i[1]+"_"+(l+1)+"_"+i[3])),c.exec(r)&&(i=c.exec(r),l===!1&&(l=parseInt(i[2],10)),s.attr("for",i[1]+"_"+(l+1)+"_"+i[3]))})}};t.GOVUK.duplicateFields=n}.call(this),jQuery.elemental=function(t,e,n){if(attributes=[],"string"==typeof n){var i,s;(i=n.match(/(\.)([-\w]+)/))?s={"class":i[2]}:(i=n.match(/(\#)([-\w]+)/))&&(s={id:i[2]}),n=s}for(key in n)attributes.push(key+'="'+n[key]+'"');var a=$("<"+t+" "+attributes.join(" ")+" />");return"string"==typeof e?a.text(e):null!=e&&a.append(e),a},jQuery(["div","span","ul","ol","li","a","p"]).each(function(){var t=this;$[t]=function(){return $.elemental(t,arguments[0],arguments[1])}}),function(t){t.fn.flashNotice=function(){if(t(this).addClass("js-flash").fadeIn(),!t(this).hasClass("alert"))var e=t(this),n=setTimeout(function(){e.fadeOut()},3e3);t(this).click(function(){n&&clearTimeout(n),t(this).fadeOut()})},t.fn.showNotice=function(e){t(this).html("<p class='flash notice'>"+e+"</p>"),t(".notice",this).flashNotice()},t.fn.showAlert=function(e){t(this).html("<p class='flash alert'>"+e+"</p>"),t(".alert",this).flashNotice()}}(jQuery),function(t){function e(t){if(t.indexOf("youtube.com")>-1){var e,n,i,s,a={};if(s=t.split("?"),1===s.length)return;for(s=s[1].split("&"),e=0,n=s.length;n>e;e++)i=s[e].split("="),a[i[0]]=i[1];return a.v}if(t.indexOf("youtu.be")>-1){var s=t.split("/");return s.pop()}}var n=function(){this.find("a[href*='youtube.com'], a[href*='youtu.be']").each(function(n){var i=t(this),s=e(i.attr("href")),a=t("<span />"),o=i.siblings(".captions");"undefined"!=typeof s&&(i.parent().replaceWith(a),a.player({id:"youtube-"+n,media:s,captions:o.length>0?o.attr("href"):null,url:document.location.protocol+"//www.youtube.com/apiplayer?enablejsapi=1&version=3&playerapiid="}))})};t.fn.extend({enhanceYoutubeVideoLinks:n})}(jQuery),jQuery(function(t){t(".flash.notice, .flash.alert").flashNotice()}),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.Proxifier={proxifyMethod:function(t,e){t[e]=$.proxy(t[e],t)},proxifyMethods:function(t,e){for(var n=0;n<e.length;n++)this.proxifyMethod(t,e[n])},proxifyAllMethods:function(t){for(var e in t)"function"==typeof t[e]&&e.match(/^[a-z]/)&&this.proxifyMethod(t,e)}}}(),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var n={_hasScrolled:!0,_scrollTimeout:!1,init:function(){var t=e(".js-back-to-content");t.length>0&&(n.$els=t,n._scrollTimeout===!1&&(e(window).scroll(n.onScroll),n._scrollTimeout=window.setInterval(n.checkScroll,50)),e(window).resize(n.onResize),n.checkScroll())},onScroll:function(){n._hasScrolled=!0},checkScroll:function(){if(n._hasScrolled===!0){n._hasScrolled=!1;var t=e(window).scrollTop();n.$els.each(function(i,s){var a,o,r=e(s),l=50,u=r.data("backToContent-start"),c=r.data("backToContent-stop"),d=r.data("backToContent-offset"),h=r.data("backToContent-windowOffset");u||(a=e(r.find("a").attr("href")),u=a.height()+a.offset().top+l,r.data("backToContent-start",u),o="auto"==r.css("top"),d=e("#page").offset().top-(o?-15:15),r.data("backToContent-offset",d),h=o?e(window).height()-r.height():0,r.data("backToContent-windowOffset",h),c=e(".js-back-to-content-stop").offset().top-l-h+r.height(),r.data("backToContent-stop",c)),t>u?n.show(r):n.hide(r),t>c?n.stick(r,c-d+h):n.unstick(r)})}},stick:function(t,e){t.css({position:"absolute",top:e})},unstick:function(t){t.css({position:"",top:""})},hide:function(t){t.addClass("visuallyhidden")},show:function(t){e(window).width()>768&&t.removeClass("visuallyhidden")}};t.GOVUK.backToContent=n}.call(this),$(govspeakBarcharts),function(){"use strict";function t(t){$(function(){GOVUK.userSatisfaction&&(GOVUK.userSatisfaction.setSurveyUrl(t.surveyUrl),GOVUK.userSatisfaction.showSurveyBar())})}window.GOVUK=window.GOVUK||{},GOVUK.CustomUserSatisfactionSurvey=t}(),function(){"use strict";function t(t){function e(){GOVUK.analytics.trackShare("facebook")}function n(){GOVUK.analytics.trackShare("twitter")}var i=$(t.el);i.on("click",".facebook",e),i.on("click",".twitter",n)}window.GOVUK=window.GOVUK||{},GOVUK.DocumentShareLinks=t}(),"undefined"==typeof window.GOVUK&&(window.GOVUK={}),function(t){"use strict";var e={loading:!1,$form:null,formType:"",renderTable:function(e){t(".js-filter-results").mustache("documents/_filter_table",e)},showStatisticsNotice:function(){t(".filter-results-summary").empty(),t(".js-filter-results").html(t("#statistics-moved-notice").text())},updateAtomFeed:function(e){e.atom_feed_url&&(t(".feeds .feed").attr("href",e.atom_feed_url),t(".feed-panel input").val(e.atom_feed_url))},updateEmailSignup:function(e){e.email_signup_url&&t(".feeds .govdelivery").attr("href",e.email_signup_url)},updateFeeds:function(n){t(".feeds").removeClass("js-hidden"),e.updateAtomFeed(n),e.updateEmailSignup(n)},updateHistory:function(t){history.pushState(e.currentPageState(),null,t)},updateTracking:function(t){GOVUK.analytics.trackPageview(t)},submitFilters:function(n){n.preventDefault();var i=e.$form,s=i.find("input[type=submit]"),a=i.attr("action"),o=a+".json",r=i.serializeArray(),l=a+"?"+i.serialize(),u=i.find("#publication_filter_option option:selected").val();return"statistics"==u?(t(".feeds").addClass("js-hidden"),e.showStatisticsNotice(),e.updateHistory(l),void e.updateTracking(l)):(s.addClass("disabled"),t(".filter-results-summary").text("Loading results\u2026"),t(".feeds").addClass("js-hidden"),e.loading=!0,void t.ajax(o,{cache:!1,dataType:"json",data:r,complete:function(){e.loading=!1},success:function(t){e.updateFeeds(t),t.results&&(e.renderTable(t),e.liveResultSummary(t)),e.updateHistory(l),e.updateTracking(l)},error:function(){s.removeAttr("disabled")}}))},urlWithout:function(t,e){var n=window.location.search,i=new RegExp("&?"+t+"%5B%5D="+e+"&?");return n.replace(i,"&")},liveResultSummary:function(n){var i,s,a,o,r,l=t(".filter-results-summary"),u=t(".headings-block h1"),c=e.currentPageState(),d={};if(l.html(""),u.find("span").remove(),n.result_type||(n.result_type="result"),d.result_count=e._numberWithDelimiter(n.total_count),d.pluralized_result_type=e._pluralize(n.result_type,n.total_count),c.selected)for(i=0,s=c.selected.length;s>i;i++)if(r=c.selected[i],r.title.length>0)if("publication_filter_option"==r.id||"announcement_filter_option"==r.id)"all"!=r.value&&u.html(u.text().trim()+"<span>: "+r.title[0]+"</span>");else if("world_locations"===r.id){for(d.world_locations=[],a=0,o=r.title.length;o>a;a++)"all"!==r.value[a]&&d.world_locations.push({name:r.title[a],url:e.urlWithout(r.id,r.value[a]),value:r.value[a],joining:o-1>a?"and":""});d.world_locations.length>0&&(d["world_locations_any?"]=!0)}else if("official_document_status"==r.id)switch(r.value[0]){case"command_and_act_papers":d["filtering_command_and_act_papers?"]=!0;break;case"command_papers_only":d["filtering_command_papers_only?"]=!0;break;case"act_papers_only":d["filtering_act_papers_only?"]=!0}else if("sub_orgs"!=r.id&&"date"!=r.id)for(d[r.id]=[],a=0,o=r.title.length;o>a;a++)"all"!==r.value[a]&&d[r.id].push({name:r.title[a],url:e.urlWithout(r.id,r.value[a]),value:r.value[a],joining:o-1>a?"and":""});if(c.text)for(i=0,s=c.text.length;s>i;i++)r=c.text[i],r.value.length&&("keywords"===r.id?d.keywords={name:r.value,url:e.urlWithout(r.id,r.value)}:"from_date"===r.id?d.date_from=r.value:"to_date"===r.id&&(d.date_to=r.value));if(c.checked)for(i=0,s=c.checked.length;s>i;i++)r=c.checked[i],"include_world_location_news"===r.id&&"1"===r.value&&(d.include_world_location_news=!0);l.mustache("documents/_filter_selections",d)},removeFilters:function(e,n){var i=["topics","departments","world_locations","official_document_status"],s=["keywords","from_date","to_date"];if(t.inArray(e,i)>-1){var a=t("select option[value='"+n+"']");if(a.length){a.removeAttr("selected");var o=a.closest("select");0===o.find(":selected").length&&o.find(">:first-child").prop("selected",!0),o.change()}}else if(t.inArray(e,s)>-1){var r=t("input#"+e);if(r.length){var l=r.val(),u=new RegExp(n);r.val(l.replace(u,"").trim())}r.parents("form").submit()}},currentPageState:function(){return{html:t(".js-filter-results").html(),selected:t.map(e.$form.find("select"),function(e){var n=t(e),i=n.attr("id"),s=[],a=[];return t("#"+i+" option:selected").each(function(){s.push(t(this).text()),a.push(t(this).attr("value"))}),{id:i,value:a,title:s}}),text:t.map(e.$form.find("input[type=text]"),function(e){var n=t(e);return{id:n.attr("id"),value:n.val()}}),checked:t.map(e.$form.find("input[type=radio]:checked, input[type=checkbox]:checked"),function(e){var n=t(e);return{id:n.attr("id"),value:n.val()}})}},onPopState:function(e){e.state&&e.state.html&&(t(".js-filter-results").html(e.state.html),t.each(e.state.selected,function(e,n){t("#"+n.id).val(n.value)}),t.each(e.state.text,function(e,n){t("#"+n.id).val(n.value)}),t.each(e.state.checked,function(e,n){t("#"+n.id).attr("checked",!0)}))},_numberWithDelimiter:function(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},_pluralize:function(t,e){return 1===e?t:"y"===t.slice(-1)?t.slice(0,-1)+"ies":t+"s"}};window.GOVUK.documentFilter=e;var n=function(){return window.ieVersion&&6===ieVersion?this:(this.each(function(){if(window.GOVUK.support.history()){var n=t(this);t(window).on("popstate",function(t){e.onPopState(t)}),e.$form=n,e.formType=n.attr("action").split("/").pop(),history.replaceState(e.currentPageState(),null),n.submit(e.submitFilters);var i=function(){var t=0;return function(e,n){clearTimeout(t),t=setTimeout(e,n)}}();n.find("select, input[type=checkbox]").change(function(){n.submit()}),t("#keyword-filter").add(".date-range-filter").find("input[type=text]").keyup(function(){i(function(){n.submit()},600)}),t(".filter-results-summary").delegate("a","click",function(n){n.preventDefault(),e.removeFilters(t(this).data("field"),t(this).data("val"))}),n.find("input[type=submit]").addClass("js-hidden")}}),this)};t.fn.extend({enableDocumentFilter:n})}(jQuery),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.feeds={init:function(){$(".js-feed").on("click",window.GOVUK.feeds.toggle)},toggle:function(t){t.preventDefault();var e=$(t.target).siblings(".js-feed-panel");e.toggle(),e.find("input").select()}}}(),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var n={_terms:!1,_regexCache:{},_trackTimeout:!1,init:function(){var t=e(".js-filter-list");1===t.length&&(n.$form=e(".js-filter-form").show(),n.$filterItems=e(".js-filter-item"),n.$filterBlock=e(".js-filter-block"),t.append(n.$form),n.$form.submit(n.updateResults),n.$form.find("input").keyup(n.updateResults))},updateResults:function(t){t.preventDefault();var i=n.$form.find("input").val(),s=n.getItems(i);e(document).trigger("govuk.hideDepartmentChildren.hideAll"),n.$filterItems.hide(),e(s).show(),n.hideEmptyBlocks(s),n.track(i)},track:function(e){clearTimeout(n._trackTimeout),n._trackTimeout=t.setTimeout(function(){var t=window.location.pathname.split("/").pop();t&&GOVUK.analytics.trackEvent("searchBoxFilter",e,{label:t,nonInteraction:!0})},1e3)},hideEmptyBlocks:function(t){0===t.length?(e(".js-filter-no-results").addClass("reveal"),n.$filterBlock.hide()):(e(".js-filter-no-results").removeClass("reveal"),n.$filterBlock.show(),n.$filterBlock.each(function(t,n){var i=e(n),s=i.find(".js-filter-count"),a=i.find(".js-filter-item:visible");0===a.length?i.hide():s.length>0&&s.text(a.length)}))},getItems:function(t){var e,i=n.getRegex(t),s=n.getFilterTerms(),a=[];for(e in s)e.match(i)&&a.push(s[e]);return a},getRegex:function(t){return"undefined"==typeof n._regexCache[t]&&(n._regexCache[t]=new RegExp(t.replace(/\W/,".*"),"i")),n._regexCache[t]},getFilterTerms:function(){return n._terms===!1&&(n._terms={},n.$filterItems.each(function(t,i){n._terms[e(i).data("filter-terms")]=i})),n._terms}};t.GOVUK.filterListItems=n}.call(this),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var n={init:function(){var i=e(".js-hide-department-children .department"),s=t.location.hash;i.each(function(t,n){var i=e(n),a=i.find(".organisations-box"),o=e('<a href="#" class="view-all">view all</a>');0===i.find(s).length&&i.toggleClass("js-hiding-children"),a.removeClass("js-hidden"),o.click(function(t){t.preventDefault(),i.toggleClass("js-hiding-children")}),o.insertBefore(a)}),e(document).on("govuk.hideDepartmentChildren.hideAll",n.hideAllChildren)},hideAllChildren:function(){e(".js-hide-department-children .department").addClass("js-hiding-children")}};t.GOVUK.hideDepartmentChildren=n}.call(this),function(t){"use strict";function e(t){return parseInt(t.position().top,10)}t.fn.hideExtraRows=function(n){return n=t.extend({rows:1},n),this.each(function(i,s){var a=t(s).contents(),o=t('<span class="js-hidden" />');if(a.length>1){var r=a.filter(function(){return 1===this.nodeType}).first(),l=e(r),u=0;if(a.slice(1).each(function(i,s){1===s.nodeType&&u<n.rows&&e(t(s))>l&&(l=e(t(s)),u+=1),u>=n.rows&&o[0].appendChild(s)}),o.contents().length>0){var c=t('<a class="show-other-content" href="#" title="Show additional content"><span class="plus">+&nbsp;</span>others</a>');c.on("click",function(e){e.preventDefault(),o.removeClass("js-hidden").focus(),n.showWrapper?n.showWrapper.remove():t(e.target).remove()}),t(s).append(o),n.showWrapper&&(c=n.showWrapper.append(c)),n.appendToParent?a.first().parent().append(c):a.first().parent().after(c)}}}),this}}(jQuery),function(t){"use strict";t.fn.hideOtherLinks=function(e){var n={linkElement:"a",alwaysVisibleClass:".always-visible",showCount:1};return t.extend(n,e),t(this).each(function(e,i){var s=t(i),a=t('<span class="other-content" />'),o=[],r=[],l=o,u=!1;if(!(n.showCount>0&&s.children(n.linkElement).length<=2&&s.text().length<=100)){var c=0;if(t(s.contents()).each(function(e,i){return c>=n.showCount&&t(i).is(n.linkElement)&&!t(i).is(n.alwaysVisibleClass)&&(l=r),i.nodeValue&&("."===i.nodeValue||i.nodeValue.match(/^\s+$/))?void(u="."===i.nodeValue):(l.push(i),void(t(i).is(n.linkElement)&&(c+=1)))}),r.length){s.empty(),t(o).each(function(t,e){s[0].appendChild(e)}),t(r).each(function(t,e){a[0].appendChild(e)}),s.append(a),u&&s.append("."),a.hide();var d=a.children(n.linkElement).length,h=t('<a href="#" class="show-other-content" title="Show additional links"><span class="plus">+&nbsp;</span>'+d+" other"+(d>1?"s":"")+"</a>");h.on("click",function(e){e.preventDefault(),t(this).remove(),a.show().focus()}),a.before(h),s.attr("aria-live","polite")}}}),this}}(jQuery),function(){"use strict";function t(t){GOVUK.support.history()&&(GOVUK.Proxifier.proxifyAllMethods(this),this.$form=$(t.form_element),this.$results=$(t.results_element),this.searchUrl=t.search_url,this.loadingMessageSelector=t.loading_message_holder,this.loadingMessageText=t.loading_message_text,this.$form.find("input[type=submit]").hide(),this.$form.find("select").on("change",this.updateResults),this.$form.find("input[type=text]").on("change keyup",this.updateResultsAfterDelay),$(window).on("popstate",this.onHistoryPopState))}window.GOVUK=window.GOVUK||{},t.prototype.UPDATE_DELAY=300,t.prototype.HISTORY_REPLACE_NOT_PUSH_FOR=2e3,t.prototype.updateResultsAfterDelay=function(){this.updateDelayTimeout&&window.clearTimeout(this.updateDelayTimeout),this.updateDelayTimeout=window.setTimeout(this.updateResults,this.UPDATE_DELAY)},t.prototype.updateResults=function(){this.pushToHistory(),this.getResultsFromRemote(this.getFilterParams())},t.prototype.getResultsFromRemote=function(t){this.renderLoadingMessage(),$.ajax({type:"get",url:this.searchUrl,data:t,cache:!1}).then(this.handleResponse)},t.prototype.handleResponse=function(t,e,n){this.$results.html(t)},t.prototype.getFilterParams=function(){var t=[];return $.each(this.$form.serializeArray(),function(e,n){""!==n.value&&t.push(n)}),t},t.prototype.urlForParams=function(t){return 0==t.length?this.searchUrl:this.searchUrl+"?"+$.param(t)},t.prototype.renderLoadingMessage=function(){var t=$("<p></p>").html(this.loadingMessageText);$(this.loadingMessageSelector).empty().append(t)},t.prototype.pushToHistory=function(){var t=this.getFilterParams();this.historyReplaceDontPushTimeout?history.replaceState(t,null,this.urlForParams(t)):history.pushState(t,null,this.urlForParams(t)),this.historyReplaceDontPushTimeout&&window.clearTimeout(this.historyReplaceDontPushTimeout),this.historyReplaceDontPushTimeout=window.setTimeout($.proxy(function(){this.historyReplaceDontPushTimeout=null},this),this.HISTORY_REPLACE_NOT_PUSH_FOR)},t.prototype.onHistoryPopState=function(t){var e=t.state||t.originalEvent.state;null!=e&&(this.setFieldValues(e),this.getResultsFromRemote(e))},t.prototype.setFieldValues=function(t){t=t||[];for(var e={},n=0;n<t.length;n++)e[t[n].name]=t[n].value;$("input:not([type=submit]), select",this.$form).each(function(t,n){n=$(n),"undefined"==typeof e[n.attr("name")]?n.val(""):n.val(e[n.attr("name")])})},GOVUK.RemoteSearchFilter=t}(),jQuery(function(t){t(".js-hide-other-links").hideOtherLinks(),t(".js-hide-other-departments").hideOtherLinks({linkElement:"span",alwaysVisibleClass:".lead"}),t(".govspeak").enhanceYoutubeVideoLinks(),t(".js-toggle-change-notes").toggler({actLikeLightbox:!0}),t(".js-toggle-footer-change-notes").toggler(),t(".js-document-filter").enableDocumentFilter(),t(".js-hide-extra-social-media").hideExtraRows({rows:5}),t(".js-hide-extra-metadata").hideExtraRows({rows:2,appendToParent:!0}),t(".see-all-updates").click(function(e){t("#history .overlay").removeClass("visuallyhidden")}),GOVUK.hideDepartmentChildren.init(),GOVUK.filterListItems.init(),GOVUK.showHide.init(),GOVUK.virtualTour.init(),GOVUK.feeds.init()}),jQuery(window).load(function(){GOVUK.backToContent.init()}),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var n={init:function(){n.$toggle=e(".js-showhide"),n.$toggle.length>0&&(n.$target=e(n.$toggle[0].hash),n.$toggle.on("click",n.toggle),n.$toggle.is(":visible")&&n.hideStuff())},toggle:function(t){return t.preventDefault(),n.$target.hasClass("js-hidden")?n.showStuff():n.hideStuff(),!1},showStuff:function(){n.$target.removeClass("js-hidden"),n.$toggle.removeClass("closed").text(n.$toggle.text().replace("Show","Hide"))},hideStuff:function(){n.$target.addClass("js-hidden"),n.$toggle.addClass("closed").text(n.$toggle.text().replace("Hide","Show"))}};t.GOVUK.showHide=n}.call(this),"undefined"==typeof window.GOVUK&&(window.GOVUK={}),"undefined"==typeof window.GOVUK.support&&(window.GOVUK.support={}),window.GOVUK.support.history=function(){return window.history&&window.history.pushState&&window.history.replaceState},function(t){t.fn.toggler=function(e){return e=t.extend({header:".toggle",content:".overlay",showArrow:!0,actLikeLightbox:!1},e),this.each(function(n,i){function s(){a.toggleClass("open"),r.toggleClass("visuallyhidden"),t(document).trigger("govuk.pageSizeChanged")}var a=t(i),o=a.find(e.header),r=a.find(e.content);o.length>0&&r.length>0&&(o.attr("tabindex",0),a.addClass("toggleable"),r.addClass("visuallyhidden"),r.removeClass("js-hidden"),e.showArrow&&r.prepend('<span class="arrow"></span>'),o.keyup(function(t){13==t.which&&(t.preventDefault(),s())}),o.click(function(t){t.preventDefault()}),o.mouseup(function(t){t.preventDefault(),s()}),e.actLikeLightbox&&t(document).click(function(e){0===t(e.target).closest(a).length&&a.hasClass("open")&&s()}))}),this}}(jQuery),function(){"use strict";function t(t){this.$el=$(t.el),this.$el.find(".other-organisations").hideOtherLinks({showCount:0,linkElement:"span"})}window.GOVUK=window.GOVUK||{},window.GOVUK.AttachmentsPreview=t}(),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var n={tours:[],addTourPlayerWrapper:function(){n.$player=e('<div id="tour-player"></div>'),n.$tour.prepend(n.$player)},findTours:function(){n.$tour.find(".tour-info").each(function(t,i){var s=e(i);n.tours.push({$el:s,id:s.attr("id"),title:s.find("h3"),xml:s.data("tour-xml")})})},findTour:function(t){var e,i;for(e=0,i=n.tours.length;i>e;e++)if(n.tours[e].id===t)return n.tours[e];return!1},switchTour:function(t){var i=e(t.target).attr("href").substr(1),s=n.findTour(i);t.preventDefault(),n.loadTour(s)},loadTour:function(t){n.$player.html(""),embedpano({swf:"/government/assets/tour/tour_pano.swf",xml:"/government/assets/tour/"+t.xml,target:"tour-player"}),n.$tour.find(".js-visible").not(t.$el).removeClass("js-visible"),t.$el.addClass("js-visible")},init:function(){n.$tour=e(".js-virtual-tour"),1===n.$tour.length&&(n.findTours(),n.addTourPlayerWrapper(),n.$nav=n.$tour.find(".tour-nav"),n.$nav.on("click","a",n.switchTour),n.loadTour(n.tours[0]))}};t.GOVUK.virtualTour=n}.call(this);